# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/introduction/learn-gitpod/gitpod-yaml)
# and commit this file to your remote git repository to share the goodness with others.

# Learn more from ready-to-use templates: https://www.gitpod.io/docs/introduction/getting-started/quickstart

image:
  file: .gitpod.Dockerfile

tasks:
  - before: | 
      doppler configure set token $DOPPLER_LOCAL_TOKEN
      doppler setup --project agility-game-kener --config dev
      mkdir -p ./static/kener && export PUBLIC_KENER_FOLDER=/workspace/kener/static/kener
      export NODE_ENV=production
      export PORT=3000
      export API_IP=127.0.0.1
      export MONITOR_YAML_PATH=/config/monitors.yaml
      export SITE_YAML_PATH=/config/site.yaml
  - init: npm install && npm run build


